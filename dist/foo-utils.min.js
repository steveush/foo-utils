/*!
* FooUtils - Contains common utility methods and classes used in our plugins.
* @version 1.0.0
* @link https://github.com/steveush/foo-utils#readme
* @copyright Steve Usher 2021
* @license Released under the GPL-3.0 license.
*/

"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){e?function(){try{return window.FooUtils}catch(e){return}}()||(window.FooUtils={$:e,version:"1.0.0"}):console.warn("jQuery must be included in the page prior to the FooUtils library.")}(jQuery),function(t,n){"1.0.0"===n.version&&(n.is={},n.is.array=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.is.boolean=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},n.is.element=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:!!e&&"object"===_typeof(e)&&1===e.nodeType&&"string"==typeof e.nodeName},n.is.empty=function(e){if(n.is.undef(e)||null===e)return!0;if(n.is.number(e)&&0===e)return!0;if(n.is.boolean(e)&&!1===e)return!0;if(n.is.string(e)&&0===e.length)return!0;if(n.is.array(e)&&0===e.length)return!0;if(n.is.jq(e)&&0===e.length)return!0;if(n.is.hash(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return!1},n.is.error=function(e){return"[object Error]"===Object.prototype.toString.call(e)},n.is.fn=function(e){return e===window.alert||"[object Function]"===Object.prototype.toString.call(e)},n.is.hash=function(e){return n.is.object(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval},n.is.jq=function(e){return!n.is.undef(t)&&e instanceof t},n.is.number=function(e){return"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)},n.is.object=function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!n.is.undef(e)&&null!==e},n.is.promise=function(e){return n.is.object(e)&&n.is.fn(e.then)&&n.is.fn(e.promise)},n.is.size=function(e){return!!(n.is.string(e)&&!n.is.empty(e)||n.is.number(e))&&/^(auto|none|(?:[\d.]*)+?(?:%|px|mm|q|cm|in|pt|pc|em|ex|ch|rem|vh|vw|vmin|vmax)?)$/.test(e)},n.is.string=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.is.undef=function(e){return void 0===e})}(FooUtils.$,FooUtils),function(u,c,l){var a;"1.0.0"===c.version&&(c.fn={},a=Function.prototype.toString,c.fn.CONTAINS_SUPER=/xyz/.test(a.call(function(){xyz}))?/\b_super\b/:/.*/,c.fn.noop=function(){},c.fn.addOrOverride=function(e,t,n){var r,i,o,s;l.object(e)&&l.string(t)&&!l.empty(t)&&l.fn(n)&&(r=e[t],i=l.fn(r)&&c.fn.CONTAINS_SUPER.test(a.call(n)),e[t]=i?(o=r,s=n,function(){var e=this._super;this._super=o;var t=s.apply(this,arguments);return this._super=e,t}):n)},c.fn.expose=function(t,n,e,r){l.object(t)&&l.object(n)&&l.array(e)&&(r=l.undef(r)?t:r,e.forEach(function(e){l.string(e)&&l.fn(t[e])&&(n[e]=t[e].bind(r))}))},c.fn.apply=function(e,t){return t.unshift(e),new(Function.prototype.bind.apply(e,t))},c.fn.arg2arr=function(e){return Array.prototype.slice.call(e)},c.fn.debounce=function(n,r){var i;return function(){var e=this,t=c.fn.arg2arr(arguments);clearTimeout(i),i=setTimeout(function(){n.apply(e,t)},r)}},c.fn.throttle=function(n,r){var i,o;return function(){var e=this,t=c.fn.arg2arr(arguments);i?(clearTimeout(o),o=setTimeout(function(){Date.now()-i>=r&&(n.apply(e,t),i=Date.now())},r-(Date.now()-i))):(n.apply(e,t),i=Date.now())}},c.fn.resolved=u.Deferred().resolve().promise(),c.fn.rejected=u.Deferred().reject().promise(),c.fn.reject=function(e,t){var n=u.Deferred(),r=c.fn.arg2arr(arguments);return n.reject.apply(n,r).promise()},c.fn.resolve=function(e,t){var n=u.Deferred(),r=c.fn.arg2arr(arguments);return n.resolve.apply(n,r).promise()},c.fn.rejectWith=function(e,t,n){var r=u.Deferred(),i=c.fn.arg2arr(arguments);return i.shift(),r.rejectWith(e,i).promise()},c.fn.resolveWith=function(e,t,n){var r=u.Deferred(),i=c.fn.arg2arr(arguments);return i.shift(),r.resolveWith(e,i).promise()},c.fn.all=function(o){var s=u.Deferred(),a=[];return l.array(o)&&0<o.length?function(){for(var t=function(e,t){r||(a[e]=0===t.length?void 0:1===t.length?t[0]:t,--n||s.resolve(a))},n=o.length,r=!1,i=0,e=o.length;i<e;i++){if("break"===function(){if(r)return"break";var e=i;l.promise(o[e])?o[e].then(function(){t(e,c.fn.arg2arr(arguments))},function(){r||(r=!0,s.reject.apply(s,c.fn.arg2arr(arguments)))}):t(e,[o[e]])}())break}}():s.resolve(a),s.promise()},c.fn.allSettled=function(r){var o=u.Deferred(),s=[];return l.array(r)&&0<r.length?function(){for(var t=function(e,t,n){var r;s[e]={status:t},0<n.length&&(r="rejected"===t?"reason":"value",s[e][r]=1===n.length?n[0]:n),--i||o.resolve(s)},i=r.length,n=0,e=r.length;n<e;n++)!function(){var e=n;l.promise(r[e])?r[e].then(function(){t(e,"fulfilled",c.fn.arg2arr(arguments))},function(){t(e,"rejected",c.fn.arg2arr(arguments))}):t(e,"fulfilled",[r[e]])}()}():o.resolve(s),o.promise()})}(FooUtils.$,FooUtils,FooUtils.is),function(e,s){var o;"1.0.0"===e.version&&(e.url={},o=document.createElement("a"),e.url.parts=function(e){o.href=e;var t=o.port?o.port:-1!==["http:","https:"].indexOf(o.protocol)?"https:"===o.protocol?"443":"80":"",n=o.hostname+(t?":"+t:""),r=o.origin?o.origin:o.protocol+"//"+n,i="/"===o.pathname.slice(0,1)?o.pathname:"/"+o.pathname;return{hash:o.hash,host:n,hostname:o.hostname,href:o.href,origin:r,pathname:i,port:t,protocol:o.protocol,search:o.search}},e.url.full=function(e){return!s.string(e)||s.empty(e)?null:(o.href=e,o.href)},e.url.param=function(e,t,n){return s.string(e)&&s.string(t)&&!s.empty(t)?s.undef(n)?(i=((r=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)")).exec(e)||["",""])[1].replace(/\+/g,"%20"),s.string(i)&&!s.empty(i)?decodeURIComponent(i):null):(s.empty(n)?(r=new RegExp("^([^#]*?)(([^#]*)&)?"+t+"(=[^&#]*)?(&|#|$)"),i=e.replace(r,"$1$3$5").replace(/^([^#]*)((\?)&|\?(#|$))/,"$1$3$4")):(r=new RegExp("([?&])"+t+"[^&]*"),o=t+"="+encodeURIComponent(n),(i=e.replace(r,"$1"+o))!==e||r.test(i)||(i+=(-1!==i.indexOf("?")?"&":"?")+o)),i):e;var r,i,o})}(FooUtils,FooUtils.is),function(a,u,c){"1.0.0"===a.version&&(a.str={},a.str.trim=function(e){return u.string(e)?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):null},a.str.camel=function(e){return u.string(e)?e.toUpperCase()===e?e.toLowerCase():e.replace(/^([A-Z])|[-\s_]+(\w)/g,function(e,t,n){return u.string(n)?n.toUpperCase():t.toLowerCase()}):e},a.str.kebab=function(e){return u.string(e)?e.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g).filter(Boolean).map(function(e){return e.toLowerCase()}).join("-"):e},a.str.contains=function(e,t,n){return!(!u.string(e)||u.empty(e)||!u.string(t)||u.empty(t))&&(t.length<=e.length&&-1!==(n?e.toUpperCase().indexOf(t.toUpperCase()):e.indexOf(t)))},a.str.containsWord=function(e,t,n){if(!u.string(e)||u.empty(e)||!u.string(t)||u.empty(t)||e.length<t.length)return!1;for(var r=e.split(/\W/),i=0,o=r.length;i<o;i++)if(n?r[i].toUpperCase()===t.toUpperCase():r[i]===t)return!0;return!1},a.str.endsWith=function(e,t){return!(!u.string(e)||!u.string(t)||t.length>e.length)&&e.slice(e.length-t.length)===t},a.str.startsWith=function(e,t){return!u.empty(e)&&!u.empty(t)&&e.slice(0,t.length)===t},a.str.escapeRegExp=function(e){return u.string(e)?e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):e},a.str.fnv1a=function(e){if(!u.string(e)||u.empty(e))return null;for(var t=2166136261,n=0,r=e.length;n<r;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0},a.str.from=function(e,t){return a.str.contains(e,t)?e.substring(e.indexOf(t)+t.length):null},a.str.join=function(e,t,n){if(!u.string(e)||!u.string(t))return null;var r=c.arg2arr(arguments);e=r.shift();for(var i=r.shift(),o=0,s=r.length;o<s;o++)t=r[o],u.empty(t)||(a.str.endsWith(i,e)&&(i=i.slice(0,i.length-e.length)),a.str.startsWith(t,e)&&(t=t.slice(e.length)),i+=e+t);return i},a.str.until=function(e,t){return a.str.contains(e,t)?e.substring(0,e.indexOf(t)):e},a.str.format=function(n,e,t){var r=c.arg2arr(arguments);return n=r.shift(),u.string(n)&&0<r.length&&(1===r.length&&(u.array(r[0])||u.object(r[0]))&&(r=r[0]),a.each(r,function(e,t){n=n.replace(new RegExp("\\{"+t+"\\}","gi"),e+"")})),n})}(FooUtils,FooUtils.is,FooUtils.fn),function(a,u,i,o){"1.0.0"===a.version&&(a.obj={},a.obj.create=function(e){if(!u.object(e))throw TypeError("Argument must be an object");function t(){}return t.prototype=e,new t},a.obj.extend=function(t,e,n){t=u.object(t)?t:{};var r=i.arg2arr(arguments);return r.shift(),a.each(r,function(e){a.obj.merge(t,e)}),t},a.obj.merge=function(e,t){for(var n in e=u.hash(e)?e:{},t=u.hash(t)?t:{})t.hasOwnProperty(n)&&(u.hash(t[n])?(e[n]=u.hash(e[n])?e[n]:{},a.obj.merge(e[n],t[n])):u.array(t[n])?e[n]=t[n].slice():e[n]=t[n]);return e},a.obj.mergeValid=function(t,n,r,e){if(!u.hash(r)||!u.hash(n))return t;var i,o,s;for(i in n=u.hash(n)?n:{},e=u.hash(e)?e:{},n)n.hasOwnProperty(i)&&u.fn(n[i])&&(o=u.array(e[i])?e[i]:u.string(e[i])?[e[i]]:[i],a.each(o,function(e){if(s=a.obj.prop(r,e),!u.undef(s))return n[i](s)?(a.obj.prop(t,i,s),!1):void 0}));return t},a.obj.prop=function(n,e,r){var t,i;if(u.object(n)&&!u.empty(e))return u.undef(r)?(o.contains(e,".")?(t=e.split("."),i=t.length-1,a.each(t,function(e,t){if(t===i)r=n[e];else{if(!u.hash(n[e]))return!1;n=n[e]}})):u.undef(n[e])||(r=n[e]),r):void(o.contains(e,".")?(t=e.split("."),i=t.length-1,a.each(t,function(e,t){t===i?n[e]=r:n=u.hash(n[e])?n[e]:n[e]={}})):u.undef(n[e])||(n[e]=r))})}((FooUtils.$,FooUtils),FooUtils.is,FooUtils.fn,FooUtils.str),function(t,i,s){"1.0.0"===i.version&&(i.ready=function(e){function t(){try{e.call(window,i.$)}catch(e){console.error(e)}}(Function("/*@cc_on return true@*/")()?"complete"===document.readyState:"loading"!==document.readyState)?t():document.addEventListener("DOMContentLoaded",t,!1)},i.find=function(e,t,n){if(s.fn(t))if(n=s.undef(n)?t:n,s.array(e)){for(i=0,o=e.length;i<o;i++)if(t.call(n,e[i],i,e))return e[i]}else if(s.object(e))for(var r=Object.keys(e),i=0,o=r.length;i<o;i++)if(t.call(n,e[r[i]],r[i],e))return e[r[i]]},i.each=function(e,t,n){if(s.fn(t))if(n=s.undef(n)?t:n,s.array(e))for(i=0,o=e.length;i<o&&!1!==t.call(n,e[i],i,e);i++);else if(s.object(e))for(var r=Object.keys(e),i=0,o=r.length;i<o&&!1!==t.call(n,e[r[i]],r[i],e);i++);},i.inArray=function(e,t){return s.array(t)?t.indexOf(e):-1},i.selectify=function(e){if(s.empty(e))return null;if(s.hash(e)){var t,n={};for(var r in e)e.hasOwnProperty(r)&&(t=i.selectify(e[r]))&&(n[r]=t);return n}return s.string(e)||s.array(e)?(s.string(e)&&(e=[e]),e.map(function(e){return s.string(e)?"."+e.split(/\s/g).join("."):null}).join(",")):null},i.requestFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}).bind(window),i.cancelFrame=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window),i.nextFrame=function(e,n){return t.Deferred(function(t){s.fn(e)?(n=s.undef(n)?e:n,i.requestFrame(function(){try{t.resolve(e.call(n))}catch(e){t.reject(e)}})):t.reject(new Error("Provided callback is not a function."))}).promise()})}(FooUtils.$,FooUtils,FooUtils.is),function(i,o,s,a){"1.0.0"===i.version&&(i.Class=function(){},i.Class.extend=function(e){e=o.hash(e)?e:{};var t=s.create(this.prototype);for(var n in e)e.hasOwnProperty(n)&&a.addOrOverride(t,n,e[n]);function r(){if(!o.fn(this.construct))throw new SyntaxError('FooUtils.Class objects must be constructed with the "new" keyword.');this.construct.apply(this,arguments)}return t.construct=o.fn(t.construct)?t.construct:function(){},(r.prototype=t).constructor=o.fn(t.__ctor__)?t.__ctor__:r,r.extend=i.Class.extend,r.override=i.Class.override,r.getBaseClasses=i.Class.getBaseClasses,r.__baseClass__=this,r},i.Class.override=function(e,t){a.addOrOverride(this.prototype,e,t)},i.Class.__baseClass__=null,i.Class.getBaseClasses=function(){return function e(t,n){return o.array(n)||(n=[]),o.fn(t)&&null!==t.__baseClass__?(n.unshift(t.__baseClass__),e(t.__baseClass__,n)):n}(this,[])})}((FooUtils.$,FooUtils),FooUtils.is,FooUtils.obj,FooUtils.fn),function(e,a,u,i){e.ClassRegistry=e.Class.extend({construct:function(e){this.opt=i.extend({allowBase:!0,beforeCreate:null},e),this.registered={}},register:function(e,t,n,r){if(a.string(e)&&!a.empty(e)&&a.fn(t)){r=a.number(r)?r:0;var i=this.registered[e];return this.registered[e]={name:e,ctor:t,config:a.hash(n)?n:{},priority:a.undef(i)?r:i.priority},!0}return!1},each:function(e,t,n){t=!!a.boolean(t)&&t,n=a.undef(n)?e:n;var r=this,i=Object.keys(r.registered).map(function(e){return r.registered[e]});t&&i.sort(function(e,t){return t.priority-e.priority});for(var o=0,s=i.length;o<s;o++){if(!1===e.call(n,i[o],o))break}},find:function(e,t,n){t=!!a.boolean(t)&&t,n=a.undef(n)?e:n;var r=this,i=Object.keys(r.registered).map(function(e){return r.registered[e]});t&&i.sort(function(e,t){return t.priority-e.priority});for(var o=0,s=i.length;o<s;o++)if(e.call(n,i[o],o))return i[o];return null},create:function(e,t,n){var r=this,i=u.arg2arr(arguments);if(e=i.shift(),a.string(e)&&r.registered.hasOwnProperty(e)){var o=r.registered[e],s=!0;if(o.priority<0&&!r.opt.allowBase&&(s=!1),s&&a.fn(o.ctor))return t=i.shift(),t=r.mergeConfigurations(o.name,t),i.unshift.apply(i,[o.name,t]),u.apply(o.ctor,r.onBeforeCreate(o,i))}return null},onBeforeCreate:function(e,t){return null!==this.opt.beforeCreate&&a.fn(this.opt.beforeCreate)?this.opt.beforeCreate.call(this,e,t):t},mergeConfigurations:function(e,t){if(a.string(e)&&this.registered.hasOwnProperty(e)){t=a.hash(t)?t:{};var n=this.getBaseClasses(e),r=[{}];return n.push(this.registered[e]),n.forEach(function(e){r.push(e.config)}),r.push(t),i.extend.apply(i,r)}return{}},getBaseClass:function(){return this.find(function(e){return e.priority<0},!0)},getBaseClasses:function(e){var n=this,t=n.registered[e],r=[];return a.undef(t)||t.ctor.getBaseClasses().forEach(function(e){var t=n.fromType(e);a.hash(t)&&r.push(t)}),r},fromType:function(t){if(a.fn(t))return this.find(function(e){return e.ctor===t})}})}((FooUtils.$,FooUtils),FooUtils.is,FooUtils.fn,FooUtils.obj),function(s,a,n){"1.0.0"===s.version&&(s.Event=s.Class.extend({construct:function(e){if(a.empty(e))throw new SyntaxError("FooUtils.Event objects must be supplied a `type`.");var t=s.Event.parse(e);this.type=t.type,this.namespace=t.namespace,this.defaultPrevented=!1,this.target=null},preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented}}),s.Event.parse=function(e){e=a.string(e)&&!a.empty(e)?e:null;var t=n.contains(e,".");return{namespaced:t,type:t?n.startsWith(e,".")?null:n.until(e,"."):e,namespace:t?n.from(e,"."):null}},s.EventClass=s.Class.extend({construct:function(){this.events={}},destroy:function(){this.events={}},on:function(n,t,r){var i=this;return a.object(n)?(r=t,Object.keys(n).forEach(function(t){a.fn(n[t])&&t.split(" ").forEach(function(e){i.addListener(e,n[t],r)})})):a.string(n)&&a.fn(t)&&n.split(" ").forEach(function(e){i.addListener(e,t,r)}),i},addListener:function(e,t,n){if(!a.string(e)||/\s/.test(e)||!a.fn(t))return!1;var r=this,i=s.Event.parse(e);return n=a.undef(n)?r:n,a.array(r.events[i.type])||(r.events[i.type]=[]),!r.events[i.type].some(function(e){return e.namespace===i.namespace&&e.fn===t&&e.thisArg===n})&&(r.events[i.type].push({namespace:i.namespace,fn:t,thisArg:n}),!0)},off:function(n,t,r){var i=this;return a.object(n)?(r=t,Object.keys(n).forEach(function(t){t.split(" ").forEach(function(e){i.removeListener(e,n[t],r)})})):a.string(n)&&n.split(" ").forEach(function(e){i.removeListener(e,t,r)}),i},removeListener:function(e,t,n){if(!a.string(e)||/\s/.test(e))return!1;var r=this,i=s.Event.parse(e),o=[];return n=a.undef(n)?r:n,a.empty(i.type)?a.empty(i.namespace)||o.push.apply(o,Object.keys(r.events)):o.push(i.type),o.forEach(function(e){a.array(r.events[e])&&(r.events[e]=r.events[e].filter(function(e){return null!=t?!(e.namespace===i.namespace&&e.fn===t&&e.thisArg===n):null!=i.namespace&&e.namespace!==i.namespace}),0===r.events[e].length&&delete r.events[e])}),!0},trigger:function(e,n){n=a.array(n)?n:[];var r=this,i=[];return e instanceof s.Event?(i.push(e),r.emit(e,n)):a.string(e)&&e.split(" ").forEach(function(e){var t=new s.Event(e);i.push(t),r.emit(t,n)}),a.empty(i)?null:1===i.length?i[0]:i},emit:function(t,n){var e;t instanceof FooUtils.Event&&(e=this,n=a.array(n)?n:[],null===t.target&&(t.target=e),a.array(e.events[t.type])&&e.events[t.type].forEach(function(e){null!=t.namespace&&e.namespace!==t.namespace||e.fn.apply(e.thisArg,[t].concat(n))}),a.array(e.events.__all__)&&e.events.__all__.forEach(function(e){e.fn.apply(e.thisArg,[t].concat(n))}))}}))}(FooUtils,FooUtils.is,FooUtils.str),function(e,r,t){"1.0.0"===e.version&&(e.Timer=e.EventClass.extend({construct:function(e){var t=this;t._super(),t.interval=r.number(e)?e:1e3,t.isRunning=!1,t.isPaused=!1,t.canResume=!1,t.canRestart=!1,t.__timeout=null,t.__decrement=!1,t.__time=0,t.__remaining=0,t.__current=0,t.__finish=0,t.__restart=[]},__reset:function(){var e=this;clearTimeout(e.__timeout),e.__timeout=null,e.__decrement=!1,e.__time=0,e.__remaining=0,e.__current=0,e.__finish=0,e.isRunning=!1,e.isPaused=!1,e.canResume=!1},__eventArgs:function(e){return[this.__current,this.__time,this.__decrement].concat(t.arg2arr(arguments))},__tick:function(){var e=this;e.trigger("tick",e.__eventArgs()),e.__current===e.__finish?(e.trigger("complete",e.__eventArgs()),e.__reset()):(e.__decrement?e.__current--:e.__current++,e.__remaining--,e.canResume=0<e.__remaining,e.__timeout=setTimeout(function(){e.__tick()},e.interval))},start:function(e,t){var n=this;n.isRunning||(t=!!r.boolean(t)&&t,n.__restart=[e,t],n.__decrement=t,n.__time=e,n.__remaining=e,n.__current=t?e:0,n.__finish=t?0:e,n.canRestart=!0,n.isRunning=!0,n.isPaused=!1,n.trigger("start",n.__eventArgs()),n.__tick())},countdown:function(e){this.start(e,!0)},countup:function(e){this.start(e,!1)},restart:function(){var e=this;e.stop(),e.canRestart&&e.start.apply(e,e.__restart)},stop:function(){var e=this;(e.isRunning||e.isPaused)&&(e.__reset(),e.trigger("stop",e.__eventArgs()))},pause:function(){var e=this;return null!=e.__timeout&&(clearTimeout(e.__timeout),e.__timeout=null),e.isRunning&&(e.isRunning=!1,e.isPaused=!0,e.trigger("pause",e.__eventArgs())),e.__remaining},resume:function(){var e=this;e.canResume&&(e.isRunning=!0,e.isPaused=!1,e.trigger("resume",e.__eventArgs()),e.__tick())},reset:function(){this.__reset(),this.trigger("reset",this.__eventArgs())}}))}((FooUtils.$,FooUtils),FooUtils.is,FooUtils.fn,FooUtils.obj),function(o,e,n){"1.0.0"===e.version&&(e.FullscreenAPI=e.EventClass.extend({construct:function(){this._super(),this.apis={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},this.api=this.getAPI(),this.supported=null!=this.api,this.__listen()},destroy:function(){return this.__stopListening(),this._super()},getAPI:function(){for(var e in this.apis)if(this.apis.hasOwnProperty(e)&&this.apis[e].enabled in document)return this.apis[e];return null},element:function(){return this.supported?document[this.api.element]:null},request:function(e){if(this.supported&&e[this.api.request]){var t=e[this.api.request]();return t||o.Deferred(this.__resolver(this.api.request)).promise()}return n.rejected},exit:function(){if(this.supported&&this.element()){var e=document[this.api.exit]();return e||o.Deferred(this.__resolver(this.api.exit)).promise()}return n.rejected},toggle:function(e){return this.element()?this.exit():this.request(e)},__listen:function(){var e=this;e.supported&&o(document).on(e.api.events.change+".utils",function(){e.trigger("change")}).on(e.api.events.error+".utils",function(){e.trigger("error")})},__stopListening:function(){this.supported&&o(document).off(this.api.events.change+".utils").off(this.api.events.error+".utils")},__resolver:function(r){var i=this;return function(e){function t(){e.resolve(),o(document).off(i.api.events.change,t).off(i.api.events.error,n)}function n(){e.reject(new TypeError),o(document).off(i.api.events.change,t).off(i.api.events.error,n)}r===i.api.exit&&i.element()?setTimeout(function(){e.reject(new TypeError)},1):o(document).on(i.api.events.change,t).on(i.api.events.error,n)}}}))}(FooUtils.$,FooUtils,FooUtils.fn),function(u,c,l,a){"1.0.0"===c.version&&(c.transition={},c.transition.dataName="__foo-transition__",c.transition.disableClassName=null,c.transition.timeout=3e3,c.transition.disable=function(e,t){var n,r,i,o=l.jq(e)?e:u(e);0<o.length&&l.fn(t)&&(n=o.get(0),i=null,(r=l.string(c.transition.disableClassName))?o.addClass(c.transition.disableClassName):(i={value:n.style.getPropertyValue("transition"),priority:n.style.getPropertyPriority("transition")},n.style.setProperty("transition","none","important")),t.call(t,o),o.prop("offsetWidth"),r?o.removeClass(c.transition.disableClassName):(n.style.removeProperty("transition"),l.string(i.value)&&0<i.value.length&&n.style.setProperty("transition",i.value,i.priority)))},c.transition.stop=function(e){var t,n=u.Deferred(),r=l.jq(e)?e:u(e);return 0<r.length?(t=r.data(c.transition.dataName),l.promise(t)?t.always(function(){c.requestFrame(function(){n.resolve(r)})}).reject(new Error("Transition cancelled.")):n.resolve(r)):n.reject(new Error("Unable to stop transition. Make sure the element exists.")),n.promise()},c.transition.createListener=function(e,t,n){var r=e,i=t,o=n,s=l.string(n);return function(e){var t=e.originalEvent instanceof TransitionEvent?e.originalEvent:e,n=!1;t.target===r&&(n=!s||t.propertyName===o),n&&i.apply(i,a.arg2arr(arguments))}},c.transition.start=function(e,n,r,i){var o,s=u.Deferred(),a=l.jq(e)?e:u(e);return 0<a.length&&l.fn(n)?(o=a.get(0),c.transition.stop(a).always(function(){var t=c.transition.createListener(o,function(){s.resolve(a)},r);a.data(c.transition.dataName,s).on("transitionend.foo-utils",t).prop("offsetWidth"),c.requestFrame(function(){var e=setTimeout(function(){s.reject(new Error("Transition safety timeout triggered."))},l.number(i)?i:c.transition.timeout);s.always(function(){clearTimeout(e),a.removeData(c.transition.dataName).off("transitionend.foo-utils",t)}),n.call(n,a)})})):s.reject(new Error("Unable to perform transition. Make sure the element exists and a trigger function is supplied.")),s.promise()},c.transition.modify=function(e,t,n,r){var i=l.jq(e)?e:u(e);return 0<i.length&&l.fn(t)?n?(c.transition.disable(i,t),a.resolve()):c.transition.start(i,t,r):a.reject(new Error("Unable to perform modification. Make sure the element exists and a modify function is supplied."))})}(FooUtils.$,FooUtils,FooUtils.is,FooUtils.fn);