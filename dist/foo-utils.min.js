/*!
* FooUtils - Contains common utility methods and classes used in our plugins.
* @version 0.2.1
* @link https://github.com/steveush/foo-utils#readme
* @copyright Steve Usher 2020
* @license Released under the GPL-3.0 license.
*/

!function(t){t?function(){try{return window.FooUtils}catch(t){return}}()||(window.FooUtils={$:t,version:"0.2.1"}):console.warn("jQuery must be included in the page prior to the FooUtils library.")}(jQuery),function(e,n){"0.2.1"===n.version&&(n.is={},n.is.array=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.is.boolean=function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},n.is.element=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:!!t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},n.is.empty=function(t){if(n.is.undef(t)||null===t)return!0;if(n.is.number(t)&&0===t)return!0;if(n.is.boolean(t)&&!1===t)return!0;if(n.is.string(t)&&0===t.length)return!0;if(n.is.array(t)&&0===t.length)return!0;if(n.is.jq(t)&&0===t.length)return!0;if(n.is.hash(t)){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}return!1},n.is.error=function(t){return"[object Error]"===Object.prototype.toString.call(t)},n.is.fn=function(t){return t===window.alert||"[object Function]"===Object.prototype.toString.call(t)},n.is.hash=function(t){return n.is.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},n.is.jq=function(t){return!n.is.undef(e)&&t instanceof e},n.is.number=function(t){return"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)},n.is.object=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&!n.is.undef(t)&&null!==t},n.is.promise=function(t){return n.is.object(t)&&n.is.fn(t.then)&&n.is.fn(t.promise)},n.is.size=function(t){return!!(n.is.string(t)&&!n.is.empty(t)||n.is.number(t))&&/^(auto|none|(?:[\d.]*)+?(?:%|px|mm|q|cm|in|pt|pc|em|ex|ch|rem|vh|vw|vmin|vmax)?)$/.test(t)},n.is.string=function(t){return"[object String]"===Object.prototype.toString.call(t)},n.is.undef=function(t){return void 0===t})}(FooUtils.$,FooUtils),function(f,h,p){var a;"0.2.1"===h.version&&(h.fn={},a=Function.prototype.toString,h.fn.CONTAINS_SUPER=/xyz/.test(a.call(function(){xyz}))?/\b_super\b/:/.*/,h.fn.addOrOverride=function(t,e,n){var r,i,s,o;p.object(t)&&p.string(e)&&!p.empty(e)&&p.fn(n)&&(r=t[e],i=p.fn(r)&&h.fn.CONTAINS_SUPER.test(a.call(n)),t[e]=i?(s=r,o=n,function(){var t=this._super;this._super=s;var e=o.apply(this,arguments);return this._super=t,e}):n)},h.fn.apply=function(t,e){function n(){return t.apply(this,e)}return e=p.array(e)?e:[],n.prototype=t.prototype,new n},h.fn.arg2arr=function(t){return Array.prototype.slice.call(t)},h.fn.debounce=function(n,r){var i;return function(){var t=this,e=h.fn.arg2arr(arguments);clearTimeout(i),i=setTimeout(function(){n.apply(t,e)},r)}},h.fn.throttle=function(n,r){var i,s;return function(){var t=this,e=h.fn.arg2arr(arguments);i?(clearTimeout(s),s=setTimeout(function(){Date.now()-i>=r&&(n.apply(t,e),i=Date.now())},r-(Date.now()-i))):(n.apply(t,e),i=Date.now())}},h.fn.check=function(e,t,n,r){function i(t){return function(){return t.apply(e,arguments)}}return n=p.fn(n)?n:f.noop,e=p.object(e)?e:window,t=p.string(t)?h.fn.fetch(t,r):t,p.fn(t)?i(t):i(n)},h.fn.fetch=function(t,n){return!p.string(t)||p.empty(t)?null:(n=p.object(n)?n:window,f.each(t.split("."),function(t,e){return!!n[e]&&void(n=n[e])}),p.fn(n)?n:null)},h.fn.enqueue=function(t,n,e,r){var i=h.fn.arg2arr(arguments),s=f.Deferred(),o=f.Deferred(),a=o.promise(),u=[],c=[],l=!0;return t=i.shift(),n=i.shift(),f.each(t,function(t,e){p.fn(e[n])&&(a=a.then(function(){var t;return l||(t=h.fn.arg2arr(arguments),u.push(t)),l=!1,function(t,e){try{return c.push(t),e.apply(t,i)}catch(t){return s.reject(t,c),s}}(e,e[n])}))}),a.then(function(){var t;l||(t=h.fn.arg2arr(arguments),u.push(t)),l=!1,s.resolve(u)}),a.fail(function(){var t=h.fn.arg2arr(arguments);t.push(c),s.reject.apply(s,t)}),o.resolve(),s.promise()},h.fn.when=function(t){if(!p.array(t)||p.empty(t))return f.when();var e=f.Deferred(),n=[],r=t.length;function i(){--r||e.resolve(n)}for(var s=0;s<t.length;s++)p.promise(t[s])?t[s].then(function(t){n.push(t)}).always(i):i();return e.promise()},h.fn.rejectWith=function(t,e){var n=f.Deferred(),r=h.fn.arg2arr(arguments);return n.reject.apply(n,r).promise()},h.fn.resolveWith=function(t,e){var n=f.Deferred(),r=h.fn.arg2arr(arguments);return n.resolve.apply(n,r).promise()},h.fn.resolved=f.Deferred().resolve().promise(),h.fn.rejected=f.Deferred().reject().promise())}(FooUtils.$,FooUtils,FooUtils.is),function(t,o){var s;"0.2.1"===t.version&&(t.url={},s=document.createElement("a"),t.url.parts=function(t){s.href=t;var e=s.port?s.port:-1!==["http:","https:"].indexOf(s.protocol)?"https:"===s.protocol?"443":"80":"",n=s.hostname+(e?":"+e:""),r=s.origin?s.origin:s.protocol+"//"+n,i="/"===s.pathname.slice(0,1)?s.pathname:"/"+s.pathname;return{hash:s.hash,host:n,hostname:s.hostname,href:s.href,origin:r,pathname:i,port:e,protocol:s.protocol,search:s.search}},t.url.full=function(t){return!o.string(t)||o.empty(t)?null:(s.href=t,s.href)},t.url.param=function(t,e,n){return o.string(t)&&o.string(e)&&!o.empty(e)?o.undef(n)?(i=((r=new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)")).exec(t)||["",""])[1].replace(/\+/g,"%20"),o.string(i)&&!o.empty(i)?decodeURIComponent(i):null):(o.empty(n)?(r=new RegExp("^([^#]*?)(([^#]*)&)?"+e+"(=[^&#]*)?(&|#|$)"),i=t.replace(r,"$1$3$5").replace(/^([^#]*)((\?)&|\?(#|$))/,"$1$3$4")):(r=new RegExp("([?&])"+e+"[^&]*"),s=e+"="+encodeURIComponent(n),(i=t.replace(r,"$1"+s))!==t||r.test(i)||(i+=(-1!==i.indexOf("?")?"&":"?")+s)),i):t;var r,i,s})}(FooUtils,FooUtils.is),function(a,u,c){"0.2.1"===a.version&&(a.str={},a.str.camel=function(t){return u.empty(t)?t:t.toUpperCase()===t?t.toLowerCase():t.replace(/^([A-Z])|[-\s_]+(\w)/g,function(t,e,n){return u.string(n)?n.toUpperCase():e.toLowerCase()})},a.str.kebab=function(t){return u.empty(t)?t:t.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g).filter(Boolean).map(function(t){return t.toLowerCase()}).join("-")},a.str.contains=function(t,e,n){return!(!u.string(t)||u.empty(t)||!u.string(e)||u.empty(e))&&(e.length<=t.length&&-1!==(n?t.toUpperCase().indexOf(e.toUpperCase()):t.indexOf(e)))},a.str.containsWord=function(t,e,n){if(!u.string(t)||u.empty(t)||!u.string(e)||u.empty(e)||t.length<e.length)return!1;for(var r=t.split(/\W/),i=0,s=r.length;i<s;i++)if(n?r[i].toUpperCase()===e.toUpperCase():r[i]===e)return!0;return!1},a.str.endsWith=function(t,e){return!u.string(t)||u.empty(t)||!u.string(e)||u.empty(e)?t===e:t.slice(t.length-e.length)===e},a.str.escapeRegExp=function(t){return u.empty(t)?t:t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},a.str.fnv1a=function(t){if(!u.string(t)||u.empty(t))return null;for(var e=2166136261,n=0,r=t.length;n<r;n++)e^=t.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0},a.str.from=function(t,e){return a.str.contains(t,e)?t.substring(t.indexOf(e)+e.length):null},a.str.join=function(t,e,n){if(!u.string(t)||!u.string(e))return null;var r=c.arg2arr(arguments);t=r.shift();for(var i=r.shift(),s=0,o=r.length;s<o;s++)e=r[s],u.empty(e)||(a.str.endsWith(i,t)&&(i=i.slice(0,i.length-t.length)),a.str.startsWith(e,t)&&(e=e.slice(t.length)),i+=t+e);return i},a.str.startsWith=function(t,e){return!u.empty(t)&&!u.empty(e)&&t.slice(0,e.length)===e},a.str.until=function(t,e){return a.str.contains(t,e)?t.substring(0,t.indexOf(e)):t},a.str.format=function(n,t,e){var r=c.arg2arr(arguments);return n=r.shift(),u.string(n)&&0<r.length&&(1===r.length&&(u.array(r[0])||u.object(r[0]))&&(r=r[0]),a.each(r,function(t,e){n=n.replace(new RegExp("\\{"+e+"\\}","gi"),t+"")})),n})}(FooUtils,FooUtils.is,FooUtils.fn),function(a,u,c,i,s){var n;"0.2.1"===u.version&&(u.obj={},n=function(){},u.obj.create=function(t){if(!c.object(t))throw TypeError("Argument must be an object");n.prototype=t;var e=new n;return n.prototype=null,e},u.obj.extend=function(n,t,e){n=c.object(n)?n:{};var r=i.arg2arr(arguments);return r.shift(),a.each(r,function(t,e){u.obj.merge(n,e)}),n},u.obj.merge=function(t,e){for(var n in t=c.hash(t)?t:{},e=c.hash(e)?e:{})e.hasOwnProperty(n)&&(c.hash(e[n])?(t[n]=c.hash(t[n])?t[n]:{},u.obj.merge(t[n],e[n])):c.array(e[n])?t[n]=e[n].slice():t[n]=e[n]);return t},u.obj.mergeValid=function(n,r,i,t){if(!c.hash(i)||!c.hash(r))return n;var s,e,o;for(s in r=c.hash(r)?r:{},t=c.hash(t)?t:{},r)r.hasOwnProperty(s)&&c.fn(r[s])&&(e=c.array(t[s])?t[s]:c.string(t[s])?[t[s]]:[s],a.each(e,function(t,e){if(o=u.obj.prop(i,e),!c.undef(o))return r[s](o)?(u.obj.prop(n,s,o),!1):void 0}));return n},u.obj.prop=function(n,t,r){var e,i;if(c.object(n)&&!c.empty(t))return c.undef(r)?(s.contains(t,".")?(e=t.split("."),i=e.length-1,a.each(e,function(t,e){if(t===i)r=n[e];else{if(!c.hash(n[e]))return!1;n=n[e]}})):c.undef(n[t])||(r=n[t]),r):void(s.contains(t,".")?(e=t.split("."),i=e.length-1,a.each(e,function(t,e){t===i?n[e]=r:n=c.hash(n[e])?n[e]:n[e]={}})):c.undef(n[t])||(n[t]=r))})}(FooUtils.$,FooUtils,FooUtils.is,FooUtils.fn,FooUtils.str),function(l,i,f){var r;"0.2.1"===i.version&&(i.ready=function(t){function e(){try{t.call(window,i.$)}catch(t){console.error(t)}}(Function("/*@cc_on return true@*/")()?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e,!1)},i.find=function(t,e,n){if(f.fn(e))if(n=f.undef(n)?e:n,f.array(t)){for(i=0,s=t.length;i<s;i++)if(e.call(n,t[i],i,t))return t[i]}else if(f.object(t))for(var r=Object.keys(t),i=0,s=r.length;i<s;i++)if(e.call(n,t[r[i]],r[i],t))return t[r[i]]},i.each=function(t,e,n){if(f.fn(e))if(n=f.undef(n)?e:n,f.array(t))for(i=0,s=t.length;i<s&&!1!==e.call(n,t[i],i,t);i++);else if(f.object(t))for(var r=Object.keys(t),i=0,s=r.length;i<s&&!1!==e.call(n,t[r[i]],r[i],t);i++);},i.versionCompare=function(t,e){if(!/[\d.]/.test(t)||!/[\d.]/.test(e))return NaN;function n(t){for(var e=t.split("."),n=[],r=0,i=e.length;r<i;r++)n[r]=parseInt(e[r]),isNaN(n[r])&&(n[r]=0);return n}for(var r=n(t),i=n(e);r.length<i.length;)r.push(0);for(;i.length<r.length;)i.push(0);for(var s=0;s<r.length;++s){if(i.length===s)return 1;if(r[s]!==i[s])return r[s]>i[s]?1:-1}return r.length!==i.length?-1:0},r=0,i.uniqueId=function(t,e){var n=t.attr("id");return f.empty(n)&&(n=(e=f.string(e)&&!f.empty(e)?e:"uid-")+ ++r,t.attr("id",n).data("__uniqueId__",!0)),n},i.removeUniqueId=function(t){t.data("__uniqueId__")&&t.removeAttr("id").removeData("__uniqueId__")},i.selectify=function(t){if(f.empty(t))return null;if(f.hash(t)){var e,n={};for(var r in t)t.hasOwnProperty(r)&&(e=i.selectify(t[r]))&&(n[r]=e);return n}return f.string(t)||f.array(t)?(f.string(t)&&(t=[t]),t.map(function(t){return f.string(t)?"."+t.split(/\s/g).join("."):null}).join(",")):null},i.src=function(t,e,n,r,i,s,o){if(!f.string(t))return null;if(!f.string(e))return t;var a=e.replace(/(\s[\d.]+[whx]),/g,"$1 @,@ ").split(" @,@ ").map(function(t){return{url:/^\s*(\S*)/.exec(t)[1],w:parseFloat((/\S\s+(\d+)w/.exec(t)||[0,1/0])[1]),h:parseFloat((/\S\s+(\d+)h/.exec(t)||[0,1/0])[1]),x:parseFloat((/\S\s+([\d.]+)x/.exec(t)||[0,1])[1])}});if(!a.length)return t;a.unshift({url:t,w:a[0].w!==1/0&&a[0].h===1/0?n:1/0,h:a[0].h!==1/0&&a[0].w===1/0?r:1/0,x:1});var u=f.number(o)?o:window.devicePixelRatio||1,c={w:i*u,h:s*u,x:u},l=["w","h","x"];return l.forEach(function(e){var n=Math.max.apply(null,a.map(function(t){return t[e]}));a=a.filter(function(t){return t[e]>=c[e]||t[e]===n})}),l.forEach(function(e){var n=Math.min.apply(null,a.map(function(t){return t[e]}));a=a.filter(function(t){return t[e]===n})}),a[0].url},i.scrollParent=function(t,s,e){t=f.jq(t)?t:l(t),s=f.string(s)&&/^(x|y|xy|yx)$/i.test(s)?s:"xy";var n=l(!!t.length&&t[0].ownerDocument||document);if(e=f.jq(e)?e:n,!t.length)return e;var r=t.css("position"),o="absolute"===r,a=/(auto|scroll)/i,u=/x/i,c=/y/i,i=t.parentsUntil(e).filter(function(t,e){var n=l(this);if(o&&"static"===n.css("position"))return!1;var r=c.test(s)&&e.scrollHeight>e.clientHeight&&a.test(n.css("overflow-y")),i=u.test(s)&&e.scrollWidth>e.clientWidth&&a.test(n.css("overflow-x"));return r||i}).eq(0);return i.is("html")&&(i=n),"fixed"!==r&&i.length?i:e})}(FooUtils.$,FooUtils,FooUtils.is),function(u,c,l){var t,e,n;"0.2.1"===c.version&&(c.animation={},c.animation.requestFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)}).bind(window),c.animation.cancelFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window),t=document.createElement("div"),c.animation.supported=(e=t.style,l.string(e.animation)||l.string(e.WebkitAnimation)||l.string(e.MozAnimation)||l.string(e.msAnimation)||l.string(e.OAnimation)),c.animation.end=(n=t.style,l.string(n.animation)?"animationend":l.string(n.WebkitAnimation)?"webkitAnimationEnd":l.string(n.MozAnimation)?"animationend":l.string(n.msAnimation)?"msAnimationEnd":l.string(n.OAnimation)?"oAnimationEnd":null),c.animation.duration=function(t,e){if(e=l.number(e)?e:0,!l.jq(t))return e;var n=t.css("animation-duration");if(/^([\d.]*)+?(ms|s)/i.test(n)){var r=n.split(","),i=0;return r.forEach(function(t){var e=t.match(/^\s*?([\d.]*)+?(ms|s)\s*?$/i),n=parseFloat(e[1]);"s"===e[2].toLowerCase()&&(n*=1e3),i<n&&(i=n)}),i}return e},c.animation.iterations=function(t,e){if(e=l.number(e)?e:1,!l.jq(t))return e;var n=t.css("animation-iteration-count");if(/^(([\d.]+)|infinite)/i.test(n)){var r=n.split(","),i=0;return r.forEach(function(t){var e=parseFloat(t);isNaN(e)&&(e=1/0),i<e&&(i=e)}),i}return e},c.animation.start=function(e,t,n,r){var i=u.Deferred(),s=i.promise();if(e=e.first(),c.animation.supported){e.prop("offsetTop");var o=e.data("animation_safety");if(l.hash(o)&&l.number(o.timer)&&(clearTimeout(o.timer),e.removeData("animation_safety").off(c.animation.end+".utils"),o.deferred.reject()),!l.number(r)){var a=c.animation.iterations(e);if(a===1/0)return i.reject("No timeout supplied with an infinite animation."),s;r=c.animation.duration(e)*a+50}o={deferred:i,timer:setTimeout(function(){e.removeData("animation_safety").off(c.animation.end+".utils"),i.resolve()},r)},e.data("animation_safety",o),e.on(c.animation.end+".utils",function(t){e.is(t.target)&&(clearTimeout(o.timer),e.removeData("animation_safety").off(c.animation.end+".utils"),i.resolve())})}return c.animation.requestFrame(function(){l.fn(t)?t.apply(e.get(0),[e]):e.toggleClass(t,n),c.animation.supported||i.resolve()}),s})}(FooUtils.$,FooUtils,FooUtils.is),function(a,u,c,l){var t,e,n;"0.2.1"===u.version&&(u.transition={},t=document.createElement("div"),u.transition.supported=(e=t.style,c.string(e.transition)||c.string(e.WebkitTransition)||c.string(e.MozTransition)||c.string(e.msTransition)||c.string(e.OTransition)),u.transition.end=(n=t.style,c.string(n.transition)?"transitionend":c.string(n.WebkitTransition)?"webkitTransitionEnd":c.string(n.MozTransition)?"transitionend":c.string(n.msTransition)?"msTransitionEnd":c.string(n.OTransition)?"oTransitionEnd":null),u.transition.duration=function(t,e){if(e=c.number(e)?e:0,!c.jq(t))return e;var n=t.css("transition-duration");if(/^([\d.]*)+?(ms|s)/i.test(n)){var r=n.split(","),i=0;return r.forEach(function(t){var e=t.match(/^\s*?([\d.]*)+?(ms|s)\s*?$/i),n=parseFloat(e[1]);"s"===e[2].toLowerCase()&&(n*=1e3),i<n&&(i=n)}),i}return e},u.transition.start=function(e,t,n,r){var i,s=a.Deferred(),o=s.promise();return e=e.first(),u.transition.supported&&(e.prop("offsetTop"),i=e.data("transition_safety"),c.hash(i)&&c.number(i.timer)&&(clearTimeout(i.timer),e.removeData("transition_safety").off(u.transition.end+".utils"),i.deferred.reject()),r=c.number(r)?r:u.transition.duration(e)+50,i={deferred:s,timer:setTimeout(function(){e.removeData("transition_safety").off(u.transition.end+".utils"),s.resolve()},r)},e.data("transition_safety",i),e.on(u.transition.end+".utils",function(t){e.is(t.target)&&(clearTimeout(i.timer),e.removeData("transition_safety").off(u.transition.end+".utils"),s.resolve())})),l.requestFrame(function(){c.fn(t)?t.apply(e.get(0),[e]):e.toggleClass(t,n),u.transition.supported||s.resolve()}),o})}(FooUtils.$,FooUtils,FooUtils.is,FooUtils.animation),function(i,s,o,a){"0.2.1"===i.version&&(i.Class=function(){},i.Class.extend=function(t){t=s.hash(t)?t:{};var e=o.create(this.prototype);for(var n in t)t.hasOwnProperty(n)&&a.addOrOverride(e,n,t[n]);function r(){if(!s.fn(this.construct))throw new SyntaxError('FooUtils.Class objects must be constructed with the "new" keyword.');this.construct.apply(this,arguments)}return e.construct=s.fn(e.construct)?e.construct:function(){},(r.prototype=e).constructor=s.fn(e.__ctor__)?e.__ctor__:r,r.extend=i.Class.extend,r.override=i.Class.override,r.bases=i.Class.bases,r.__base__=this,r},i.Class.override=function(t,e){a.addOrOverride(this.prototype,t,e)},i.Class.__base__=null,i.Class.bases=function(){return function t(e,n){return s.array(n)||(n=[]),s.fn(e)&&null!==e.__base__?(n.unshift(e.__base__),t(e.__base__,n)):n}(this,[])})}((FooUtils.$,FooUtils),FooUtils.is,FooUtils.obj,FooUtils.fn),function(o,a,n){"0.2.1"===o.version&&(o.Event=o.Class.extend({construct:function(t){if(a.empty(t))throw new SyntaxError("FooUtils.Event objects must be supplied a `type`.");var e=o.Event.parse(t);this.type=e.type,this.namespace=e.namespace,this.defaultPrevented=!1,this.target=null},preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented}}),o.Event.parse=function(t){t=a.string(t)&&!a.empty(t)?t:null;var e=n.contains(t,".");return{namespaced:e,type:e?n.startsWith(t,".")?null:n.until(t,"."):t,namespace:e?n.from(t,"."):null}},o.EventClass=o.Class.extend({construct:function(){this.events={}},destroy:function(){this.events={}},on:function(n,e,r){var i=this;return a.object(n)?(r=e,Object.keys(n).forEach(function(e){a.fn(n[e])&&e.split(" ").forEach(function(t){i.addListener(t,n[e],r)})})):a.string(n)&&a.fn(e)&&n.split(" ").forEach(function(t){i.addListener(t,e,r)}),i},addListener:function(t,e,n){if(!a.string(t)||/\s/.test(t)||!a.fn(e))return!1;var r=this,i=o.Event.parse(t);return n=a.undef(n)?r:n,a.array(r.events[i.type])||(r.events[i.type]=[]),!r.events[i.type].some(function(t){return t.namespace===i.namespace&&t.fn===e&&t.thisArg===n})&&(r.events[i.type].push({namespace:i.namespace,fn:e,thisArg:n}),!0)},off:function(n,e,r){var i=this;return a.object(n)?(r=e,Object.keys(n).forEach(function(e){e.split(" ").forEach(function(t){i.removeListener(t,n[e],r)})})):a.string(n)&&n.split(" ").forEach(function(t){i.removeListener(t,e,r)}),i},removeListener:function(t,e,n){if(!a.string(t)||/\s/.test(t))return!1;var r=this,i=o.Event.parse(t),s=[];return n=a.undef(n)?r:n,a.empty(i.type)?a.empty(i.namespace)||s.push.apply(s,Object.keys(r.events)):s.push(i.type),s.forEach(function(t){a.array(r.events[t])&&(r.events[t]=r.events[t].filter(function(t){return null!=e?!(t.namespace===i.namespace&&t.fn===e&&t.thisArg===n):null!=i.namespace&&t.namespace!==i.namespace}),0===r.events[t].length&&delete r.events[t])}),!0},trigger:function(t,n){n=a.array(n)?n:[];var r=this,i=[];return t instanceof o.Event?(i.push(t),r.emit(t,n)):a.string(t)&&t.split(" ").forEach(function(t){var e=new o.Event(t);i.push(e),r.emit(e,n)}),a.empty(i)?null:1===i.length?i[0]:i},emit:function(e,n){var t;e instanceof FooUtils.Event&&(t=this,n=a.array(n)?n:[],null===e.target&&(e.target=t),a.array(t.events[e.type])&&t.events[e.type].forEach(function(t){null!=e.namespace&&t.namespace!==e.namespace||t.fn.apply(t.thisArg,[e].concat(n))}),a.array(t.events.__all__)&&t.events.__all__.forEach(function(t){t.fn.apply(t.thisArg,[e].concat(n))}))}}))}(FooUtils,FooUtils.is,FooUtils.str),function(r,i,s){var n;"0.2.1"===i.version&&(i.Bounds=i.Class.extend({construct:function(){var t=this;t.top=0,t.right=0,t.bottom=0,t.left=0,t.width=0,t.height=0},inflate:function(t){var e=this;return s.number(t)&&(e.top-=t,e.right+=t,e.bottom+=t,e.left-=t,e.width+=2*t,e.height+=2*t),e},intersects:function(t){return this.left<=t.right&&t.left<=this.right&&this.top<=t.bottom&&t.top<=this.bottom}}),i.getViewportBounds=function(t){n=n||r(window);var e=new i.Bounds;return e.top=n.scrollTop(),e.left=n.scrollLeft(),e.width=n.width(),e.height=n.height(),e.right=e.left+e.width,e.bottom=e.top+e.height,e.inflate(t),e},i.getElementBounds=function(t){s.jq(t)||(t=r(t));var e,n=new i.Bounds;return 0!==t.length&&(e=t.offset(),n.top=e.top,n.left=e.left,n.width=t.width(),n.height=t.height()),n.right=n.left+n.width,n.bottom=n.top+n.height,n})}(FooUtils.$,FooUtils,FooUtils.is),function(t,r,e){"0.2.1"===t.version&&(t.Timer=t.EventClass.extend({construct:function(t){this._super(),this.interval=r.number(t)?t:1e3,this.isRunning=!1,this.isPaused=!1,this.canResume=!1,this.canRestart=!1,this.__timeout=null,this.__decrement=!1,this.__time=0,this.__remaining=0,this.__current=0,this.__finish=0,this.__restart=[]},__reset:function(){clearTimeout(this.__timeout),this.__timeout=null,this.__decrement=!1,this.__time=0,this.__remaining=0,this.__current=0,this.__finish=0,this.isRunning=!1,this.isPaused=!1,this.canResume=!1},__eventArgs:function(t){return[this.__current,this.__time,this.__decrement].concat(e.arg2arr(arguments))},__tick:function(){var t=this;t.trigger("tick",t.__eventArgs()),t.__current===t.__finish?(t.trigger("complete",t.__eventArgs()),t.__reset()):(t.__decrement?t.__current--:t.__current++,t.__remaining--,t.canResume=0<t.__remaining,t.__timeout=setTimeout(function(){t.__tick()},t.interval))},start:function(t,e){var n=this;n.isRunning||(e=!!r.boolean(e)&&e,n.__restart=[t,e],n.__decrement=e,n.__time=t,n.__remaining=t,n.__current=e?t:0,n.__finish=e?0:t,n.canRestart=!0,n.isRunning=!0,n.isPaused=!1,n.trigger("start",n.__eventArgs()),n.__tick())},countdown:function(t){this.start(t,!0)},countup:function(t){this.start(t,!1)},restart:function(){this.stop(),this.canRestart&&this.start.apply(this,this.__restart)},stop:function(){(this.isRunning||this.isPaused)&&(this.__reset(),this.trigger("stop",this.__eventArgs()))},pause:function(){var t=this;return null!=t.__timeout&&(clearTimeout(t.__timeout),t.__timeout=null),t.isRunning&&(t.isRunning=!1,t.isPaused=!0,t.trigger("pause",t.__eventArgs())),t.__remaining},resume:function(){var t=this;t.canResume&&(t.isRunning=!0,t.isPaused=!1,t.trigger("resume",t.__eventArgs()),t.__tick())},reset:function(){this.__reset(),this.trigger("reset",this.__eventArgs())}}))}((FooUtils.$,FooUtils),FooUtils.is,FooUtils.fn,FooUtils.obj),function(l,t,f,h){"0.2.1"===t.version&&(t.Factory=t.Class.extend({construct:function(){this.registered={}},contains:function(t){return!f.undef(this.registered[t])},load:function(t,e,n){var r,i,s,o=this,a=h.arg2arr(arguments),u=[],c=[];for(r in t=a.shift()||{},o.registered){o.registered.hasOwnProperty(r)&&(s=o.registered[r],t.hasOwnProperty(r)&&(i=t[r],f.string(i)&&(i=h.fetch(t[r])),f.fn(i)&&(s={name:r,klass:i,priority:o.registered[r].priority})),u.push(s))}for(r in t)t.hasOwnProperty(r)&&!o.registered.hasOwnProperty(r)&&(i=t[r],f.string(i)&&(i=h.fetch(t[r])),f.fn(i)&&u.push({name:r,klass:i,priority:0}));return u.sort(function(t,e){return e.priority-t.priority}),l.each(u,function(t,e){f.fn(e.klass)&&c.push(h.apply(e.klass,a))}),c},make:function(t,e,n){var r,i=h.arg2arr(arguments);return t=i.shift(),r=this.registered[t],f.hash(r)&&f.fn(r.klass)?h.apply(r.klass,i):null},names:function(t){t=!!f.boolean(t)&&t;var e,n=[];if(t){var r=[];for(e in this.registered)this.registered.hasOwnProperty(e)&&r.push(this.registered[e]);r.sort(function(t,e){return e.priority-t.priority}),l.each(r,function(t,e){n.push(e.name)})}else for(e in this.registered)this.registered.hasOwnProperty(e)&&n.push(e);return n},register:function(t,e,n){if(!f.string(t)||f.empty(t)||!f.fn(e))return!1;n=f.number(n)?n:0;var r=this.registered[t];return this.registered[t]={name:t,klass:e,priority:f.undef(r)?n:r.priority},!0}}))}(FooUtils.$,FooUtils,FooUtils.is,FooUtils.fn),function(s,t,n){"0.2.1"===t.version&&(t.FullscreenAPI=t.EventClass.extend({construct:function(){this._super(),this.apis={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},this.api=this.getAPI(),this.supported=null!=this.api,this.__listen()},destroy:function(){return this.__stopListening(),this._super()},getAPI:function(){for(var t in this.apis)if(this.apis.hasOwnProperty(t)&&this.apis[t].enabled in document)return this.apis[t];return null},element:function(){return this.supported?document[this.api.element]:null},request:function(t){if(this.supported&&t[this.api.request]){var e=t[this.api.request]();return e||s.Deferred(this.__resolver(this.api.request)).promise()}return n.rejected},exit:function(){if(this.supported&&this.element()){var t=document[this.api.exit]();return t||s.Deferred(this.__resolver(this.api.exit)).promise()}return n.rejected},toggle:function(t){return this.element()?this.exit():this.request(t)},__listen:function(){var t=this;t.supported&&s(document).on(t.api.events.change+".utils",function(){t.trigger("change")}).on(t.api.events.error+".utils",function(){t.trigger("error")})},__stopListening:function(){this.supported&&s(document).off(this.api.events.change+".utils").off(this.api.events.error+".utils")},__resolver:function(r){var i=this;return function(t){function e(){t.resolve(),s(document).off(i.api.events.change,e).off(i.api.events.error,n)}function n(){t.reject(new TypeError),s(document).off(i.api.events.change,e).off(i.api.events.error,n)}r===i.api.exit&&i.element()?setTimeout(function(){t.reject(new TypeError)},1):s(document).on(i.api.events.change,e).on(i.api.events.error,n)}}}))}(FooUtils.$,FooUtils,FooUtils.fn);